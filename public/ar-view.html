<!DOCTYPE html>
<html>
  <head>
    <title>AR Camera Raycaster</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/1.7.0/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <script>
      AFRAME.registerComponent('raycast-checker', {
        tick: function () {
          const camera = document.querySelector('#cam');
          const hud = document.querySelector('#hud');

          if (!camera || !camera.components.raycaster || !hud) return;

          const intersects = camera.components.raycaster.intersections;

          if (intersects.length > 0) {
            const point = intersects[0].point;
            hud.setAttribute('value', `ğŸ‘ï¸ Hit at x=${point.x.toFixed(2)}, y=${point.y.toFixed(2)}, z=${point.z.toFixed(2)}`);
          } else {
            hud.setAttribute('value', `âŒ No intersection`);
          }
        }
      });
    </script>

    <a-scene
      embedded
      raycast-checker
      arjs="sourceType: webcam; facingMode: environment; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
    >
      <!-- Camera with raycaster -->
      <a-entity 
        id="cam" 
        camera 
        look-controls
        raycaster="objects: .detectable; far: 10"
      >
        <a-text
          id="hud"
          value="Waiting..."
          position="0 0 -0.5"
          align="center"
          width="1.5"
          color="white"
        ></a-text>
      </a-entity>

      <!-- Detectable objects -->
      <a-box class="detectable" position="0 0 -2" color="red" depth="0.5" height="0.5" width="0.5"></a-box>
      <a-sphere class="detectable" position="1 0 -3" radius="0.3" color="blue"></a-sphere>
    </a-scene>
  </body>
</html>
