<!DOCTYPE html>
<html>
  <head>
    <title>Markerless AR - Show Camera Rotation</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/1.7.0/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <script>
      AFRAME.registerComponent('camera-tracker', {
        tick: function () {
          const camera = document.querySelector('#cam');
          const hud = document.querySelector('#hud');

          if (camera && hud) {
            const rotation = camera.getAttribute('rotation');
            const message = `Rot: x=${rotation.x.toFixed(2)}, y=${rotation.y.toFixed(2)}, z=${rotation.z.toFixed(2)}`;
            hud.setAttribute('value', message);
            let ring = document.querySelector('#ring');
            ring.setAttribute('position', rotation)
          
          }
        }
      });
    </script>

    <a-scene
      embedded
      camera-tracker
      arjs="sourceType: webcam; facingMode: environment; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
    >
      <!-- Camera -->
      <a-entity 
        id="cam" 
        camera 
        look-controls
      >
        <a-text
          id="hud"
          value="Initializing..."
          position="0 0 -0.5"
          align="center"
          width="0.3"
          color="white"
        ></a-text>
      </a-entity>

      <!-- Ring placed in front of camera -->
      <a-ring 
        id="ring"
        color="teal" 
        radius-inner="0.1" 
        radius-outer="0.2" 
        rotation="-90 0 0"
        position="0 0 -5"
      ></a-ring>

      <a-box
        id="box" 
        color="red"
        width="0.5"
        heigth="0.5"
        scale="0.2 0.2 0.2"
        position="0 0 -1.5"
      ></a-box>


    </a-scene>
  </body>
</html>
